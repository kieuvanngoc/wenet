<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>elFinder 2.0</title>
		<script type="text/javascript" src="http://localhost:7070/admin/view/javascript/jquery/jquery.js"></script>
		<script type="text/javascript" src="http://localhost:7070/admin/view/javascript/tiny_mce/tiny_mce_popup.js"></script>
		<link rel="stylesheet" href="http://localhost:7070/admin/view/javascript/jquery-ui-1.8.22/css/ui-lightness/jquery-ui-1.8.22.custom.css" type="text/css" media="screen" charset="utf-8" />
		<link rel="stylesheet" href="http://localhost:7070/admin/view/javascript/elfinder-2.0/css/elfinder.min.css" type="text/css" media="screen" charset="utf-8" />
		<script src="http://localhost:7070/admin/view/javascript/jquery-ui-1.8.22/js/jquery-ui-1.8.22.custom.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="http://localhost:7070/admin/view/javascript/elfinder-2.0/js/elfinder.min.js"></script>
		<script type="text/javascript">
			var FileBrowserDialogue = {
			  init: function() {
			    // Here goes your code for setting your custom things onLoad.
			  },
			  mySubmit: function (URL) {
			    var win = tinyMCEPopup.getWindowArg('window');
			
			    // pass selected file path to TinyMCE
			    win.document.getElementById(tinyMCEPopup.getWindowArg('input')).value = URL;
			
			    // are we an image browser?
			    if (typeof(win.ImageDialog) != 'undefined') {
			      // update image dimensions
			      if (win.ImageDialog.getImageData) {
			        win.ImageDialog.getImageData();
			      }
			      // update preview if necessary
			      if (win.ImageDialog.showPreviewImage) {
			        win.ImageDialog.showPreviewImage(URL);
			      }
			    }
			
			    // close popup window
			    tinyMCEPopup.close();
			  }
			}
		
			tinyMCEPopup.onInit.add(FileBrowserDialogue.init, FileBrowserDialogue);
			  var FileBrowserDialogue = {
			    init: function() {
			      // Here goes your code for setting your custom things onLoad.
			    },
			    mySubmit: function (URL) {
			      var win = tinyMCEPopup.getWindowArg('window');
			
			      // pass selected file path to TinyMCE
			      win.document.getElementById(tinyMCEPopup.getWindowArg('input')).value = URL;
			
			      // are we an image browser?
			      if (typeof(win.ImageDialog) != 'undefined') {
			        // update image dimensions
			        if (win.ImageDialog.getImageData) {
			          win.ImageDialog.getImageData();
			        }
			        // update preview if necessary
			        if (win.ImageDialog.showPreviewImage) {
			          win.ImageDialog.showPreviewImage(URL);
			        }
			      }
			
			      // close popup window
			      tinyMCEPopup.close();
			    }
			  }
			
			  tinyMCEPopup.onInit.add(FileBrowserDialogue.init, FileBrowserDialogue);
			
			  $().ready(function() {
			    var elf = $('#elfinder').elfinder({
			      // set your elFinder options here
			      url: 'http://localhost:7070/system/elfinder/connector.php',  // connector URL
			      getFileCallback: function(url) { // editor callback
			        FileBrowserDialogue.mySubmit(url); // pass selected file path to TinyMCE 
			      }
			    }).elfinder('instance');      
			  });
		</script>		
	</head>
	<body>
		<div id="elfinder"></div>
	</body>
</html>
